import{s as g,I as y,a as I,b as C}from"./ImgWorkspace.e2c55ee0.js";import{_ as z,d as D,r as k,o as r,c as d,w as p,a as b,b as u,e as $,f as E,F as B,u as m,g as F,n as U}from"./index.f11dbda6.js";const j=D({__name:"Desktop",setup(A){const h=e=>{const n=["B","KB","MB"];let t=0;for(;e>=1024&&t<3;)e/=1024,t+=1;return e.toFixed(2)+n[t]},o=k(0),s=k([]),f=()=>{const e=document.createElement("input");e.type="file",e.accept=".jpg,.jpeg,.png",e.multiple=!0,e.style.position="absolute",e.style.left="-500px",e.style.top="-500px",document.body.appendChild(e),e.onchange=()=>{const n=e.files;if(!n){alert("\u65E0\u6587\u4EF6");return}for(let t=0;t<n.length;t++)try{const a=new FileReader;a.onload=()=>{s.value.push({filename:n[t].name,base64:a.result,size:h(n[t].size)})},a.onerror=c=>{console.log(`error occurred when reading "${n[t].name}": `,c)},a.readAsDataURL(n[t]),document.body.removeChild(e)}catch(a){console.log(`error occurred when solving "${n[t].name}": `,a)}},e.click()},_=e=>{o.value=e},w=e=>{s.value.splice(e,1),o.value>e?o.value-=1:o.value===e&&(o.value=-1)},x=()=>{s.value=[],o.value=-1},v=(e,n,t,a)=>{const c=document.createElement("canvas");c.width=t,c.height=a;const l=new Image;l.src=n,l.onload=()=>{c.getContext("2d").drawImage(l,0,0,t,a);const i=document.createElement("a");i.href=c.toDataURL("image/png"),i.download=`resized_${t}_${a}_${e}`,i.click()}};return(e,n)=>(r(),d(m(I),{class:"desktop",style:{height:"100%"}},{default:p(()=>[b(m(g),{class:"panel-container",size:20,minSize:20},{default:p(()=>[u("div",{class:"panel-title"},[u("div",{class:"btn",onClick:f},"\u5BFC\u5165"),u("div",{class:"btn",onClick:x},"\u6E05\u7A7A")]),(r(!0),$(B,null,E(s.value,(t,a)=>(r(),d(C,{class:U(["single-img",o.value===a?"active":"default"]),key:a,pic:t,onDirect50:c=>v(t.filename,t.base64,50,50),onDelImg:c=>w(a),onClick:c=>_(a)},null,8,["class","pic","onDirect50","onDelImg","onClick"]))),128))]),_:1}),b(m(g),{class:"workspace-container",size:80,minSize:70},{default:p(()=>[o.value>=0&&o.value<s.value.length?(r(),d(y,{pic:s.value[o.value],key:o.value,onDownloadImg:v},null,8,["pic"])):F("",!0)]),_:1})]),_:1}))}});var S=z(j,[["__scopeId","data-v-bd037c12"]]);export{S as default};
